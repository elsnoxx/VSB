<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
	<script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" rel="stylesheet">
</head>

<body>

	<ion-header>
		<ion-toolbar>
			<ion-title>Birthday Application</ion-title>
		</ion-toolbar>
	</ion-header>

	<ion-content class="ion-padding">
		<h1>Enter your details</h1>

		<ion-item>
			<ion-input label="Name input" label-placement="floating" fill="solid" placeholder="Enter your name"
				id="name"></ion-input>
		</ion-item>

		<ion-item>
			<ion-datetime-button datetime="datetime"></ion-datetime-button>

			<ion-modal>
				<ion-datetime id="datetime" presentation="date" display-format="YYYY-MM-DD" cancel-text="Cancel"
					done-text="Select" show-default-buttons="true">
					<span slot="title">Select brithday</span>
				</ion-datetime>
			</ion-modal>
		</ion-item>

		<ion-button expand="block" onclick="countDays()">
			Count days
		</ion-button>

		<ion-alert id="greeter" header="Greetings"></ion-alert>

	</ion-content>

	<script>
		function countDays() {
			const name = document.getElementById('name').value;
			const dob = document.getElementById('datetime').value;

			if (!name) {
				showAlert("Enter your name!");
			} else if (!dob) {
				showAlert("Enter your birthday!");
			} else {
				calculateDays(name, dob);
			}
		}

		function calculateDays(name, dob) {
			let birthday = new Date(dob);
			const today = new Date();

			birthday.setHours(0, 0, 0, 0);
			today.setHours(0, 0, 0, 0);

			let nextBirthday = new Date(today.getFullYear(), birthday.getMonth(), birthday.getDate());

			if (today > nextBirthday) {
				nextBirthday.setFullYear(today.getFullYear() + 1);
			}

			let daysToBirthday = Math.round((nextBirthday - today) / (1000 * 60 * 60 * 24));
			let dayOfWeek = nextBirthday.toLocaleDateString("cs-CZ", { weekday: 'long', day: 'numeric', month: 'long' });

			if (daysToBirthday === 0) {
				showAlert(`M치코 dnes narozeniny, ${name}! 游꿀`);
			} else if (daysToBirthday > 0) {
				showAlert(`Ahoj ${name}! Narozeniny bude코 m칤t za ${daysToBirthday} dn칤, v ${dayOfWeek}.`);
			} else {
				let nextYearBirthday = new Date(today.getFullYear() + 1, birthday.getMonth(), birthday.getDate());
				let nextYearDays = Math.round((nextYearBirthday - today) / (1000 * 60 * 60 * 24));
				let nextYearDayOfWeek = nextYearBirthday.toLocaleDateString("cs-CZ", { weekday: 'long', day: 'numeric', month: 'long' });

				showAlert(`Tvoje narozeniny u letos byly. P콏칤코t칤 rok je bude코 m칤t v ${nextYearDayOfWeek}, za ${nextYearDays} dn칤.`);
			}
		}

		function showAlert(message) {
			const alrt = document.getElementById("greeter");
			alrt.message = message;
			alrt.buttons = ['Dismiss'];
			alrt.present();
		}
	</script>

</body>

</html>